# NOTE: For more details check the link below.
# https://github.com/slsa-framework/oss-na24-slsa-workshop-model-integrity/blob/main/model_signing/readme.md
---
apiVersion: rhtas.redhat.com/v1alpha1
kind: ModelValidation
metadata:
  name: oss-na24-slasa-workshop
spec:
  config:
    # pkiConfig:
    #   certificateAuthority: /path/to/ca.crt
    # privateKeyConfig:
    #   keyPath: /root/pub.key
    sigstoreConfig:
      certificateIdentity: "laurentsimon@google.com"
      certificateOidcIssuer: "https://accounts.google.com"
  model:
    path: /data/tensorflow_saved_model
    signaturePath: /data/tensorflow_saved_model/model.sig
---
apiVersion: v1
kind: Pod
metadata:
  name: whatever-workload
  labels:
    validation.rhtas.redhat.com/ml: "true"
spec:
#  restartPolicy: Never
  containers:
  - name: whatever-workload
    image: nginx
    ports:
    - containerPort: 80
    volumeMounts:
    - name: model-storage
      mountPath: /data
  volumes:
  - name: model-storage
    persistentVolumeClaim:
      claimName: models

